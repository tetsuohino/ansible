# Ansible
## Ansible„ÅÆÂâçÊèêÊù°‰ª∂ÔºàÂà∂Âæ°„Éé„Éº„Éâ„Å®ÂØæË±°„Éé„Éº„ÉâÔºâ
### üíª Âà∂Âæ°„Éé„Éº„Éâ (Control Node) „ÅÆÂâçÊèêÊù°‰ª∂

Ansible„ÇíÂÆüË°å„Åô„Çã„Éé„Éº„Éâ„Åß„Åô„ÄÇ

| OS | ÂøÖÈ†àÊù°‰ª∂ | Ë£úË∂≥‰∫ãÈ†Ö |
| :--- | :--- | :--- |
| **Linux / macOS** | **Python 3.8 ‰ª•Èôç** | Ansible Core„ÅØPython„ÅßÊõ∏„Åã„Çå„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÂÆüË°å„Å´„ÅØPython„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ |
| | **pip** | Ansible„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Åß„Åô„ÄÇ |
| | **OpenSSH „ÇØ„É©„Ç§„Ç¢„É≥„Éà** | Linux/macOS„ÅåÊ®ôÊ∫ñ„ÅßÊê≠Ëºâ„Åó„Å¶„ÅÑ„ÇãSSH„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÔºà`ssh`„Ç≥„Éû„É≥„ÉâÔºâ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ„Åì„Çå„Åå**„É™„É¢„Éº„ÉàÊé•Á∂ö„ÅÆ‰∏ªË¶Å„Å™ÊâãÊÆµ**„Å®„Å™„Çä„Åæ„Åô„ÄÇ |
| **Windows** | **Èùû„Çµ„Éù„Éº„Éà** | Windows„ÅØ**Âà∂Âæ°„Éé„Éº„Éâ„Å®„Åó„Å¶Ê≠£Âºè„Å´„ÅØ„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì**„ÄÇAnsible„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅLinuxÁí∞Â¢ÉÔºàWSL„ÇíÂê´„ÇÄÔºâ„Åæ„Åü„ÅØmacOS„Çí‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ |

> üí° **„Éù„Ç§„É≥„Éà**: Ansible„ÅØÂØæË±°„Éé„Éº„Éâ„Å´„Ç®„Éº„Ç∏„Çß„É≥„Éà„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„ÇãÂøÖË¶Å„Åå„Å™„ÅÑ„Åü„ÇÅ„ÄÅÂà∂Âæ°„Éé„Éº„Éâ„Å´ÂøÖË¶Å„Å™„ÅÆ„ÅØ„ÄÅAnsibleÊú¨‰Ωì„ÄÅPython„ÄÅ„Åù„Åó„Å¶Êé•Á∂öÊâãÊÆµÔºàSSHÔºâ„Å†„Åë„Åß„Åô„ÄÇ

## üéØ ÂØæË±°„Éé„Éº„Éâ (Managed Node) „ÅÆÂâçÊèêÊù°‰ª∂

Ansible„Å´„Çà„Å£„Å¶ÊßãÊàêÁÆ°ÁêÜ„Åï„Çå„Çã„Éé„Éº„Éâ„Åß„Åô„ÄÇ

| OS | ÂøÖÈ†àÊù°‰ª∂ | Êé•Á∂öÊñπÂºè |
| :--- | :--- | :--- |
| **Linux / macOS** | **Python 3.5 ‰ª•Èôç** | „É¢„Ç∏„É•„Éº„É´ÔºàAnsible„ÅÆ‰ΩúÊ•≠Âçò‰ΩçÔºâ„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„Å´ÂøÖÈ†à„Åß„Åô„ÄÇ |
| | **OpenSSH „Çµ„Éº„Éê„Éº** | Âà∂Âæ°„Éé„Éº„Éâ„Åã„Çâ„ÅÆÊé•Á∂ö„ÇíÂèó„Åë‰ªò„Åë„Çã„Åü„ÇÅ„ÅÆSSH„Çµ„Éº„Éê„Éº„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ |
| | **sftp „Åæ„Åü„ÅØ scp** | „Éï„Ç°„Ç§„É´Ëª¢ÈÄÅ„ÅÆ„Åü„ÇÅ„Å´ÂøÖË¶Å„Åß„ÅôÔºàÈÄöÂ∏∏SSH„Çµ„Éº„Éê„Éº„Å´Âê´„Åæ„Çå„Å¶„ÅÑ„Åæ„ÅôÔºâ„ÄÇ |
| **Windows** | **PowerShell 3.0 ‰ª•Èôç** | „É¢„Ç∏„É•„Éº„É´„ÅÆÂÆüË°åÁí∞Â¢É„Å®„Åó„Å¶PowerShell„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ |
| | **Python „ÅØ‰∏çË¶Å** | Windows„Éé„Éº„Éâ„Åß„ÅØ„ÄÅAnsible„ÅØWS-Management (WinRM) Êé•Á∂ö„ÇíÈÄö„Åò„Å¶PowerShell„Çπ„ÇØ„É™„Éó„Éà„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„ÄÅ**Python„ÅØÂøÖÈ†à„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì**„ÄÇ |
| | **WinRM „Çµ„Éº„Éì„Çπ** | **WS-Management (WinRM)** „Çµ„Éº„Éì„Çπ„ÅåÂÆüË°å„Åï„Çå„ÄÅAnsibleÂà∂Âæ°„Éé„Éº„Éâ„Åã„Çâ„ÅÆÊé•Á∂ö„ÇíÂèó„Åë‰ªò„Åë„Çã„Çà„ÅÜ„Å´ÊßãÊàê„Åï„Çå„Å¶„ÅÑ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„Çå„Åå**„É™„É¢„Éº„ÉàÊé•Á∂ö„ÅÆ‰∏ªË¶Å„Å™ÊâãÊÆµ**„Å®„Å™„Çä„Åæ„Åô„ÄÇ |

> üí° **Windows„Å´Èñ¢„Åô„ÇãË£úË∂≥**: Windows„ÇíÂØæË±°„Éé„Éº„Éâ„Å®„Åô„ÇãÂ†¥Âêà„ÄÅLinux/macOS„ÅÆ„Çà„ÅÜ„Å™SSHÊé•Á∂ö„Åß„ÅØ„Å™„Åè„ÄÅ**WinRM**Êé•Á∂ö„ÅåÊé®Â•®„Åï„Çå„Åæ„Åô„ÄÇWinRM„ÅÆÈÅ©Âàá„Å™Ë®≠ÂÆö„ÅØLinux„ÅÆSSHË®≠ÂÆö„Çà„Çä„ÇÇË§áÈõë„Å´„Å™„ÇãÂÇæÂêë„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅAnsible„ÅÆÂÖ¨Âºè„Éâ„Ç≠„É•„É°„É≥„Éà„Å´„ÅÇ„Çã„ÄåSetting up a Windows Host„Äç„ÇíÂèÇÁÖß„Åó„Å¶Ë®≠ÂÆö„ÇíË°å„ÅÜÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

## install
* python
    ```
    ubuntu@ip-172-31-46-156:~/ansible$ python3 -m venv venv
    ubuntu@ip-172-31-46-156:~/ansible$ source venv/bin/activate
    (venv) ubuntu@ip-172-31-46-156:~/ansible$ python --version
    Python 3.13.8
    ```

* ansible
    ```
    (venv) ubuntu@ip-172-31-46-156:~/ansible/step1$ pip install ansible
    Collecting ansible
    Using cached ansible-13.0.0-py3-none-any.whl.metadata (8.1 kB)
    „Éª„Éª„Éª
    ```

    ```
    (venv) ubuntu@ip-172-31-46-156:~/ansible/step1$ ansible --version
    ansible [core 2.20.0]
    config file = None
    configured module search path = ['/home/ubuntu/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
    ansible python module location = /home/ubuntu/ansible/venv/lib/python3.13/site-packages/ansible
    ansible collection location = /home/ubuntu/.ansible/collections:/usr/share/ansible/collections
    executable location = /home/ubuntu/ansible/venv/bin/ansible
    python version = 3.13.8 (main, Oct  8 2025, 08:53:25) [GCC 13.3.0] (/home/ubuntu/ansible/venv/bin/python3)
    jinja version = 3.1.6
    pyyaml version = 6.0.3 (with libyaml v0.2.5)
    ```

## inventory.ini
* simple (localhost only)
    ```
    # inventory.ini
    [all]
    localhost ansible_connection=local

    [all:vars]
    ansible_python_interpreter=/usr/bin/python
    ```

## run builtin commands
1. ping
    ```
    (venv) ubuntu@ip-172-31-46-156:~/ansible/step1$ ansible all -i inventory.ini -m ansible.builtin.ping
    localhost | SUCCESS => {
        "changed": false,
        "ping": "pong"
    }    
    ```

2. http
* docker image„ÅÆÂèñÂæó
    ```
    (venv) ubuntu@ip-172-31-46-156:~/ansible/step2$ docker images
                                                                                                                                                                                                                                                        i Info ‚Üí   U  In Use
    IMAGE                                   ID             DISK USAGE   CONTENT SIZE   EXTRA
    ubuntu/nginx:1.18-20.04_beta            3acad1ceb494        190MB         49.1MB        
    ```

* ansible-playbookÂÆüË°å
    ```
    (venv) ubuntu@ip-172-31-46-156:~/ansible/step2$ ansible-playbook check_nginx_status.yml 
    [WARNING]: No inventory was parsed, only implicit localhost is available
    [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

    PLAY [Nginx„Ç≥„É≥„ÉÜ„Éä„ÅÆËµ∑Âãï„Å®„Çπ„ÉÜ„Éº„Çø„ÇπÁ¢∫Ë™ç] ***************************************************************************************************************************************************************************************************************************************

    TASK [Êó¢Â≠ò„Ç≥„É≥„ÉÜ„Éä„ÇíÂº∑Âà∂ÂâäÈô§ (ÂÆüË°åÂâç„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó)] *****************************************************************************************************************************************************************************************************************************
    ok: [localhost]

    TASK [Nginx„Ç≥„É≥„ÉÜ„Éä„Çí„Éù„Éº„Éà„Éï„Ç©„ÉØ„Éº„Éâ‰ªò„Åç„ÅßËµ∑Âãï] *********************************************************************************************************************************************************************************************************************************
    changed: [localhost]

    TASK [Nginx„ÅåÂøúÁ≠î„Åô„Çã„Åæ„ÅßÂæÖÊ©ü („Éò„É´„Çπ„ÉÅ„Çß„ÉÉ„ÇØ)] **********************************************************************************************************************************************************************************************************************************
    ok: [localhost]

    TASK [ÂøúÁ≠î„Éò„ÉÉ„ÉÄ„Éº„ÅÆÁ¢∫Ë™ç] ********************************************************************************************************************************************************************************************************************************************************
    ok: [localhost] => {
        "msg": "Nginx„ÅåÊ≠£Â∏∏„Å´ÂøúÁ≠î„Åó„Åæ„Åó„Åü„ÄÇHTTP„Çπ„ÉÜ„Éº„Çø„Çπ: 200, „Çµ„Éº„Éê„ÉºÊÉÖÂ†±: nginx/1.18.0 (Ubuntu)"
    }

    PLAY [„Ç≥„É≥„ÉÜ„Éä„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„ÉóÂá¶ÁêÜ (ÂÅúÊ≠¢„Å®ÂâäÈô§)] *********************************************************************************************************************************************************************************************************************************

    TASK [Nginx„Ç≥„É≥„ÉÜ„Éä„ÇíÂÅúÊ≠¢] *******************************************************************************************************************************************************************************************************************************************************
    changed: [localhost]

    TASK [Nginx„Ç≥„É≥„ÉÜ„Éä„ÇíÂâäÈô§] *******************************************************************************************************************************************************************************************************************************************************
    changed: [localhost]

    PLAY RECAP ***********************************************************************************************************************************************************************************************************************************************************************
    localhost                  : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
    ```